<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decidimos o qu√©</title>

<style>
* { box-sizing: border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; }
body {
  margin: 0;
  background: linear-gradient(135deg, #ff4fa1, #ff8bd8);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}
.app {
  width: 100%;
  max-width: 380px;
  background: #fff;
  border-radius: 25px;
  padding: 25px;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,.25);
}
h1 { color: #ff2f92; margin-bottom: 5px; }
.subtitle { font-size: .85rem; color: #888; margin-bottom: 20px; }
.filters label { font-size: .8rem; display: block; text-align: left; margin-bottom: 5px; }
select {
  width: 100%;
  padding: 10px;
  border-radius: 12px;
  border: none;
  background: #ffe2f1;
  margin-bottom: 15px;
}
.card-wrapper { position: relative; height: 130px; }
.card {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #ff5ec4, #ff8bd8);
  border-radius: 20px;
  padding: 25px;
  font-size: 1.2rem;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  animation: pop .25s ease;
}
@keyframes pop { from { transform: scale(.9); opacity:0; } to { transform: scale(1); opacity:1; } }
.swipe-left { animation: left .25s ease forwards; }
.swipe-right { animation: right .25s ease forwards; }
@keyframes left { to { transform: translateX(-120%) rotate(-10deg); opacity:0; } }
@keyframes right { to { transform: translateX(120%) rotate(10deg); opacity:0; } }

.buttons { display: flex; justify-content: space-between; margin-top: 20px; }
button {
  width: 48%;
  padding: 15px;
  border-radius: 50px;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
}
.nope { background: #ffd0e5; }
.like { background: #000; color: white; }
button:active { transform: scale(.96); }

.msg { margin-top: 15px; font-size: .8rem; color: #777; min-height: 20px; }

#confetti { position: fixed; inset: 0; pointer-events: none; z-index: 999; }
#finalImg { display:none; width:100%; border-radius:20px; margin-top:15px; animation: pop .4s ease; }
</style>
</head>

<body>
<div class="app">
  <h1>¬øQu√© hacemos?</h1>
  <div class="subtitle">Desliza. Decide. No llores.</div>

  <div class="filters">
    <label>‚è± Tiempo</label>
    <select id="time">
      <option value="1h">1 hora</option>
      <option value="2-3h">2‚Äì3 horas</option>
      <option value="tarde">Tarde entera</option>
    </select>

    <label>üí∏ Presupuesto</label>
    <select id="money">
      <option value="0">0‚Ç¨</option>
      <option value="1-15">1‚Äì15‚Ç¨</option>
      <option value="+15">+15‚Ç¨</option>
    </select>

    <label>üîã Energ√≠a</label>
    <select id="energy">
      <option value="low">Muertos</option>
      <option value="mid">Normales</option>
      <option value="high">Motivados</option>
    </select>
  </div>

  <div class="card-wrapper">
    <div class="card" id="card">Pulsa üñ§ para empezar</div>
  </div>

  <img id="finalImg" src="images.jpg" alt="Plan sellado">

  <div class="buttons">
    <button class="nope" onclick="nextPlan()">‚ùå</button>
    <button class="like" onclick="likePlan()">üñ§</button>
  </div>

  <div class="msg" id="msg"></div>
</div>

<canvas id="confetti"></canvas>

<script>
// TODOS LOS PLANES
const plans = [
  {text:"Paseo por el Parque del Retiro + fotos", time:["2-3h","tarde"], money:["0"], energy:["mid","high"]},
  {text:"Caf√© y churros en San Gin√©s", time:["1h"], money:["1-15"], energy:["low","mid"]},
  {text:"Cenar en 100 Montaditos", time:["2-3h","tarde"], money:["1-15"], energy:["mid","high"]},
  {text:"Mini ruta por Malasa√±a + merendar", time:["1h","2-3h"], money:["0","1-15"], energy:["low","mid"]},
  {text:"Helado en La Mallorquina y paseo por Sol", time:["1h","2-3h"], money:["1-15"], energy:["mid"]},
  {text:"Picnic en Madrid R√≠o", time:["2-3h","tarde"], money:["0","1-15"], energy:["low","mid"]},
  {text:"Tapas en Mercado de San Miguel", time:["2-3h"], money:["1-15","+15"], energy:["mid","high"]},
  {text:"Paseo por La Latina + fotos", time:["2-3h"], money:["0"], energy:["mid"]},
  {text:"Ir a un mirador y fotos nocturnas", time:["tarde"], money:["0"], energy:["mid","high"]},
  {text:"Visitar CaixaForum + fotos", time:["2-3h"], money:["0"], energy:["mid","high"]},
  {text:"Ir al H2O a competir", time:["2-3h"], money:["1-15"], energy:["mid","high"]},
  {text:"Cine en Callao", time:["2-3h"], money:["+15"], energy:["mid"]},
  {text:"Escape room Madrid", time:["2-3h"], money:["+15"], energy:["high"]},
  {text:"Picnic con pizzas", time:["2-3h","tarde"], money:["1-15","+15"], energy:["mid","high"]},
  {text:"Merendar gofres en Chueca", time:["1h"], money:["1-15"], energy:["low","mid"]},
  {text:"Nos quedamos en Vic√°lvaro", time:["2-3h"], money:["0"], energy:["low","mid"]},
  {text:"Paseo por Jardines del Palacio Real", time:["1h","2-3h"], money:["0"], energy:["mid"]},
  {text:"Fotitos en el Templo de Debod al atardecer", time:["1h","2-3h"], money:["0"], energy:["mid","high"]},
  {text:"Ir al Plenilunio", time:["1h"], money:["1-15"], energy:["low"]},
  {text:"Ir a un mercado vintage en Lavapi√©s", time:["2-3h","tarde"], money:["0","1-15"], energy:["mid","high"]},
  {text:"Subir a una azotea en el centro", time:["tarde"], money:["1-15","+15"], energy:["mid","high"]},
  {text:"Ruta de helader√≠as en Chamber√≠", time:["1h","2-3h"], money:["1-15"], energy:["low","mid"]},
  {text:"Fotos por Malasa√±a y Chueca", time:["2-3h"], money:["0"], energy:["mid","high"]},
  {text:"Cenar en un italiano", time:["2-3h"], money:["+15"], energy:["mid","high"]},
  {text:"Paseo por Madrid R√≠o al atardecer", time:["1h","2-3h"], money:["0"], energy:["low","mid"]},
  {text:"Visitar exposiciones gratis", time:["2-3h"], money:["0"], energy:["mid"]},
  {text:"Quedamos en la casa del otro", time:["2-3h"], money:["0"], energy:["low"]},
  {text:"Ir al Oasiz", time:["2-3h"], money:["1-15"], energy:["high"]},
  {text:"Paseo por el Parque de Berl√≠n", time:["2-3h"], money:["0"], energy:["low","mid"]},
  {text:"Helados + paseo por Plaza Mayor", time:["1h","2-3h"], money:["1-15"], energy:["mid"]},
  {text:"Fotos en las Cuatro Torres", time:["2-3h"], money:["0"], energy:["mid","high"]},
  {text:"Atardecer en el Faro de Moncloa", time:["2-3h","tarde"], money:["0"], energy:["mid","high"]},
  {text:"Merendar + fotos en Sabatini", time:["2-3h"], money:["1-15"], energy:["low","mid"]},
  {text:"Cenar en un venezolano", time:["2-3h"], money:["1-15","+15"], energy:["mid","high"]},
  {text:"Museo Reina Sof√≠a", time:["2-3h"], money:["+15"], energy:["mid","high"]},
  {text:"Ir a la cachaper√≠a", time:["2-3h"], money:["1-15","+15"], energy:["mid","high"]},
  {text:"Ruta de churros y chocolate por Sol", time:["1h"], money:["1-15"], energy:["low","mid"]},
  {text:"Picnic en Parque del Oeste", time:["2-3h"], money:["0"], energy:["low","mid"]},
  {text:"Ir a la bolera", time:["1h","2-3h"], money:["+15"], energy:["mid"]},
  {text:"Fotos por Chamber√≠", time:["1h","2-3h"], money:["0"], energy:["mid"]},
  {text:"Ruta gastron√≥mica Ant√≥n Mart√≠n", time:["2-3h"], money:["1-15"], energy:["mid","high"]},
  {text:"Ir al cine", time:["1h","2-3h"], money:["+15"], energy:["mid"]},
  {text:"Hamburguesa gourmet en Malasa√±a", time:["2-3h"], money:["+15"], energy:["mid","high"]},
  {text:"Ir a alg√∫n sitio que no conozcamos", time:["2-3h"], money:["0","1-15"], energy:["mid","high"]},
  {text:"Ir a Casa de Campo", time:["2-3h","tarde"], money:["0","1-15"], energy:["high"]},
  {text:"Fotos en Azotea C√≠rculo Bellas Artes", time:["1h","2-3h"], money:["+15"], energy:["mid","high"]},
  {text:"Cenar en el Vips", time:["1h"], money:["+15"], energy:["low","mid"]},
  {text:"Cocinar juntos", time:["2-3h"], money:["0","1-15"], energy:["low"]},
  {text:"Jugar al f√∫tbol", time:["1h","2-3h"], money:["0"], energy:["mid","high"]},
  {text:"Fotomat√≥n", time:["2-3h"], money:["1-15"], energy:["mid"]},
  {text:"Ir a los karts", time:["2-3h"], money:["+15"], energy:["mid","high"]},
  {text:"Ir a la piscina", time:["2-3h"], money:["0"], energy:["mid"]}
];

let filtered = [];
let index = 0;
const card = document.getElementById("card");
const msg = document.getElementById("msg");
const time = document.getElementById("time");
const money = document.getElementById("money");
const energy = document.getElementById("energy");

// FILTRO Y MOSTRAR PLAN
function loadPlans() {
  filtered = plans.filter(p =>
    p.time.includes(time.value) &&
    p.money.includes(money.value) &&
    p.energy.includes(energy.value)
  );
  index = 0;
  showPlan();
}
function showPlan() {
  if (!filtered.length) { card.textContent = "No hay plan. Baja expectativas."; return; }
  card.className = "card";
  card.textContent = filtered[index].text;
}

// SWIPE IZQUIERDA
const swipeMsgs = ["Siguiente. Exigente.","No era para tanto.","Esta no te convenc√≠a.","Ni tan mal, pero no."];
function nextPlan() {
  if (!filtered.length) return;
  card.classList.add("swipe-left");
  msg.textContent = swipeMsgs[Math.floor(Math.random()*swipeMsgs.length)];
  setTimeout(() => { index = (index+1)%filtered.length; showPlan(); }, 250);
}

// PLAN SELLADO üñ§
function launchConfetti(duration = 2000) {
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const pieces = Array.from({ length: 120 }, () => ({
    x: Math.random()*canvas.width,
    y: Math.random()*-canvas.height,
    r: Math.random()*6+4,
    d: Math.random()*3+2,
    color: `hsl(${Math.random()*360}, 90%, 60%)`,
    tilt: Math.random()*10-5
  }));
  let start = Date.now();
  (function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p => {
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x,p.y,p.r,p.r);
      p.y += p.d;
      p.x += p.tilt*0.1;
      if(p.y>canvas.height)p.y=-10;
    });
    if(Date.now()-start<duration)requestAnimationFrame(draw);
    else ctx.clearRect(0,0,canvas.width,canvas.height);
  })();
}

function likePlan() {
  if (!filtered.length) return;
  card.classList.add("swipe-right");
  setTimeout(() => {
    card.className = "card";
    card.textContent = "üñ§ PLAN SELLADO üñ§\n" + filtered[index].text;
    msg.textContent = "Decisi√≥n tomada. Luego no protestes.";
    document.getElementById("finalImg").style.display = "block";
    launchConfetti(2500);
    document.body.style.background = "linear-gradient(135deg, #ff2f92, #ff5ec4)";
  },250);
}

// LISTENER FILTROS
document.querySelectorAll("select").forEach(s => s.addEventListener("change", loadPlans));
</script>
</body>
</html>
